<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="625px" preserveAspectRatio="none" style="width:1291px;height:625px;background:#FFFFFF;" version="1.1" viewBox="0 0 1291 625" width="1291px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="211" x="536" y="23.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="201" x="541" y="43.1113">The Authorization Code Flow</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="134.7969" y2="527.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="630" x2="630" y1="134.7969" y2="527.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1243" x2="1243" y1="134.7969" y2="527.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="131.7207">User</text><ellipse cx="22.5" cy="65.6875" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,73.6875 L22.5,100.6875 M9.5,81.6875 L35.5,81.6875 M22.5,100.6875 L9.5,115.6875 M22.5,100.6875 L35.5,115.6875 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="540.9551">User</text><ellipse cx="22.5" cy="552.5313" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,560.5313 L22.5,587.5313 M9.5,568.5313 L35.5,568.5313 M22.5,587.5313 L9.5,602.5313 M22.5,587.5313 L35.5,602.5313 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="589" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="596" y="123.7207">Application</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="589" y="526.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="596" y="547.9551">Application</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="1208" y="102.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1215" y="123.7207">Keycloak</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="1208" y="526.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1215" y="547.9551">Keycloak</text><polygon fill="#181818" points="618.5,179.5,628.5,183.5,618.5,187.5,622.5,183.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22.5" x2="624.5" y1="183.5" y2="183.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="29.5" y="170.4678">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="40.5" y="162.292">Login</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="40.5" y="178.6436">User click vào nút login trên</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="64" x="204.5" y="178.6436">Application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="268.5" y="178.6436">.</text><line style="stroke:#181818;stroke-width:1.0;" x1="630.5" x2="672.5" y1="230.2031" y2="230.2031"/><line style="stroke:#181818;stroke-width:1.0;" x1="672.5" x2="672.5" y1="230.2031" y2="243.2031"/><line style="stroke:#181818;stroke-width:1.0;" x1="631.5" x2="672.5" y1="243.2031" y2="243.2031"/><polygon fill="#181818" points="641.5,239.2031,631.5,243.2031,641.5,247.2031,637.5,243.2031" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="637.5" y="217.1709">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="648.5" y="208.9951">Generate authentication request</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="64" x="648.5" y="225.3467">Application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="716.5" y="225.3467">sẽ tạo một</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142" x="782.5" y="225.3467">authentication request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="924.5" y="225.3467">.</text><polygon fill="#181818" points="33.5,302.2578,23.5,306.2578,33.5,310.2578,29.5,306.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="27.5" x2="629.5" y1="306.2578" y2="306.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="39.5" y="285.0498">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="50.5" y="268.6982">Redirect to Keycloak</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="130" x="50.5" y="285.0498">Authentication request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="184.5" y="285.0498">sẽ chuyển</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="27" x="248.5" y="285.0498">User</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="279.5" y="285.0498">đến form</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="74" x="333.5" y="285.0498">302 redirect</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="407.5" y="285.0498">,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="50.5" y="301.4014">user-agent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="121.5" y="301.4014">sẽ hướng dẫn và</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="49" x="223.5" y="301.4014">redirect</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="276.5" y="301.4014">đến</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="301.5" y="301.4014">authorization endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="449.5" y="301.4014">được cung cấp bởi</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="54" x="565.5" y="301.4014">Keycloak</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="619.5" y="301.4014">.</text><polygon fill="#181818" points="1231.5,365.3125,1241.5,369.3125,1231.5,373.3125,1235.5,369.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22.5" x2="1237.5" y1="369.3125" y2="369.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="29.5" y="348.1045">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="40.5" y="331.7529">Send authentication request to Keycloak</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="63" x="40.5" y="348.1045">User-agent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="107.5" y="348.1045">mở</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="127" x="131.5" y="348.1045">authorization endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="262.5" y="348.1045">với chính xác</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="343.5" y="348.1045">query parameters</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="455.5" y="348.1045"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="40.5" y="364.4561">được tạo bởi</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="64" x="121.5" y="364.4561">Application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="189.5" y="364.4561">thông qua</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="128" x="250.5" y="364.4561">authentication request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="378.5" y="364.4561">.</text><polygon fill="#181818" points="33.5,412.0156,23.5,416.0156,33.5,420.0156,29.5,416.0156" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1231.5,412.0156,1241.5,416.0156,1231.5,420.0156,1235.5,416.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.5" x2="1237.5" y1="416.0156" y2="416.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="39.5" y="402.9834">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="50.5" y="394.8076">Authenticate user</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="54" x="50.5" y="411.1592">Keycloak</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="108.5" y="411.1592">sẽ hiện thị</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="68" x="172.5" y="411.1592">login page</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="244.5" y="411.1592">cho user nhập</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="131" x="330.5" y="411.1592">username, password</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="465.5" y="411.1592">sau đó</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="70" x="508.5" y="411.1592">submit form</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="578.5" y="411.1592">.</text><polygon fill="#181818" points="641.5,458.7188,631.5,462.7188,641.5,466.7188,637.5,462.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="635.5" x2="1242.5" y1="462.7188" y2="462.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="647.5" y="449.6865">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="658.5" y="441.5107">Return authorization code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="658.5" y="457.8623">Sau khi</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="54" x="706.5" y="457.8623">Keycloak</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="764.5" y="457.8623">xác thực đúng user, nó sẽ tạo một</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119" x="969.5" y="457.8623">authorization code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="1092.5" y="457.8623">và trả về cho</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="64" x="1168.5" y="457.8623">Application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1232.5" y="457.8623">.</text><polygon fill="#181818" points="641.5,505.4219,631.5,509.4219,641.5,513.4219,637.5,509.4219" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1231.5,505.4219,1241.5,509.4219,1231.5,513.4219,1235.5,509.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="635.5" x2="1237.5" y1="509.4219" y2="509.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="647.5" y="496.3896">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="658.5" y="488.2139">Send token request to Keycloak</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="64" x="658.5" y="504.5654">Application</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="726.5" y="504.5654">bấy giờ có thể</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="63" x="814.5" y="504.5654">exchange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="877.5" y="504.5654"> </text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="106" x="881.5" y="504.5654">authorization code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="991.5" y="504.5654">để lấy</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="158" x="1030.5" y="504.5654">ID token và refresh token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1188.5" y="504.5654">.</text><rect fill="none" height="12.5781" id="_title" style="stroke:none;stroke-width:1.0;" width="320" x="963" y="5"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="320" x="963" y="15.3809">Keycloak-Identity-and-Access-Management-for-Modern-Applications</text><rect fill="none" height="12.5781" id="_title" style="stroke:none;stroke-width:1.0;" width="27" x="628" y="605.0313"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="27" x="628" y="615.4121">1 of 1</text><!--MD5=[eb792572e9abc848d0e5ef211d84ded7]
@startuml TheAuthorizationCodeFlow

    header Keycloak-Identity-and-Access-Management-for-Modern-Applications
    title The Authorization Code Flow

    actor "User" as user
    participant "Application" as app
    participant "Keycloak" as keycloak

    autonumber 1
    
    user -> app: Login \nUser click vào nút login trên //Application//.

    app -> app: Generate authentication request \n//Application// sẽ tạo một **authentication request**.
    
    app - -_> user: Redirect to Keycloak \n//Authentication request// sẽ chuyển //User// đến form **302 redirect**, \n**user-agent** sẽ hướng dẫn và **redirect** đến **authorization endpoint** được cung cấp bởi //Keycloak//.
    
    user -> keycloak: Send authentication request to Keycloak \n//User-agent// mở //authorization endpoint// với chính xác **query parameters** \nđược tạo bởi //Application// thông qua //authentication request//.
    
    user <-> keycloak: Authenticate user \n//Keycloak// sẽ hiện thị **login page** cho user nhập **username, password** sau đó //submit form//.
    
    keycloak - -_> app: Return authorization code \nSau khi //Keycloak// xác thực đúng user, nó sẽ tạo một **authorization code** và trả về cho //Application//.
    
    app <-> keycloak: Send token request to Keycloak \n//Application// bấy giờ có thể **exchange** //authorization code// để lấy **ID token và refresh token**.

    footer %page% of %lastpage%
@enduml

PlantUML version 1.2022.7(Tue Aug 23 00:01:30 ICT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>